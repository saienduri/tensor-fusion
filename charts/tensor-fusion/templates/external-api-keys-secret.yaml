{{- if .Values.externalConnections.enabled }}
{{- if and (not .Values.externalConnections.existingSecret) .Values.externalConnections.apiKeys }}
# API keys secret created from values (use existingSecret for production)
apiVersion: v1
kind: Secret
metadata:
  name: tensor-fusion-api-keys
  namespace: {{ include "tensor-fusion.namespace" . }}
  labels:
    {{- include "tensor-fusion.labels" . | nindent 4 }}
type: Opaque
stringData:
  keys.json: |
    {{- .Values.externalConnections.apiKeys | toJson | nindent 4 }}
{{- end }}
{{- end }}
